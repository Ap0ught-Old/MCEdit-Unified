<!DOCTYPE html>
<html lang="en-US">
<head>
	<title>MCEdit Unified</title>

	<meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

	<script src="js/jquery.min.js"></script>
	<script src="js/bootstrap.min.js"></script>
	<script src="js/scripts.js"></script>
	<script src="js/marked.js"></script>

	<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
	<link rel="stylesheet" href="css/font-awesome.min.css">
	<link rel="stylesheet" href="css/stylesheet.css">
	<link rel="shortcut icon" href="favicon.ico">

	<meta name="viewport" content="width=device-width, initiass ol-scale=1">

	<!-- Google Analytics -->
	<script>
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
			(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
			m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

		ga('create', 'UA-57749723-1', 'auto');
		ga('send', 'pageview');
	</script>

	<!-- Looks for outdated IE browsers -->
	<!--[if lte IE 9]>
		<p class="update">Hey, it looks like you are using an old browser, you can go to <a href="http://browsehappy.com/">Browsehappy.com</a> to get the latest version of your browser and others.</p>
	<[endif]-->

	<script>
		function pageTrigger() {
			var is_OSX = navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i) ? true : false;
			var is_Win = (navigator.platform.match(/(Win)/i) && !is_OSX)? true : false;

			if (is_OSX) {
				$('#Win-downloads-toplevel').hide();
				$('#Lin-downloads-toplevel').hide();
				$('#OSX-downloads-toplevel').addClass('col-md-offset-4');
				$('.override-platform-specific-downloads-container').show();
			} else if (is_Win) {
				$('#OSX-downloads-toplevel').hide();
				$('#Lin-downloads-toplevel').hide();
				$('#Win-downloads-toplevel').addClass('col-md-offset-4');
				$('.override-platform-specific-downloads-container').show();
			}
			$('.override-platform-specific-downloads').click(function(){
				$('#Win-downloads-toplevel').show();
				$('#Lin-downloads-toplevel').show();
				$('#OSX-downloads-toplevel').show();
				if (is_OSX) {
					$('#OSX-downloads-toplevel').removeClass('col-md-offset-4');
				} else if (is_Win) {
					$('#Win-downloads-toplevel').removeClass('col-md-offset-4');
				}
				$('.override-platform-specific-downloads-container').hide();
			});

			var releaseData = getReleaseData();
			var commentJSON = getJSON('comments.json');
			for (var i = 0; i < releaseData.length; i++) {
				var note = marked(releaseData[i].body).replace(/@([a-zA-Z0-9]+)/g,' <a href="http://github.com/$1">@$1</a>');
				var version = releaseData[i].tag_name;
				var title = releaseData[i].name
				if (releaseData[i].prerelease) {
					var releaselabel = 'Pre-release';
				} else {
					var releaselabel = '';
				}
				var releasetimesec = (new Date() - new Date(releaseData[i].published_at)) / 1000;
				var releasetime = new Date(releaseData[i].published_at).toLocaleDateString();
				if (releasetimesec < 60) {
					releasetime = Math.round(releasetimesec) + 's ago';
				} else if (releasetimesec < 60 * 60) {
					releasetime = Math.round(releasetimesec / 60) + 'm ago';
				} else if (releasetimesec < 60 * 60 * 24) {
					releasetime = Math.round(releasetimesec / 60 / 60) + ' hours ago';
				} else if (releasetimesec < 60 * 60 * 24 * 30) {
					releasetime = Math.round(releasetimesec / 60 / 60 / 24) + ' days ago';
				}

				var totalDownloads = 0
				for (var x = releaseData[i].assets.length - 1; x >= 0; x--) {
					totalDownloads += releaseData[i].assets[x].download_count;
				}

				var commentlink = '';
				if (commentJSON.hasOwnProperty(version)) {
					commentlink = 'Comment <a href="' + commentJSON[version] + '">Here</a>';
				} else {
					commentlink = 'Comments unavailable';
				}

				$('#changelog').append('<div class="row releasenote" version="' + version + '"></div>' + (i < releaseData.length - 1 ? '<hr>' : ''));
				releasenote = $('.releasenote[version="' + version + '"]');
				releasenote.append('<div class="col-md-2 releasenote-title"><div style="padding-right:10px;"><h2 style="display:inline;"><a href="' + releaseData[i].html_url + '">' + version + '</a></h2><br><span class="badge">' + totalDownloads + ' downloads</span><br>' + commentlink + '<br>' + (releaseData[i].prerelease ? 'Pre-release<br>' : '') + releasetime + '</div></div>');
				releasenote.append('<div class="col-md-10"><p>' + note + '</p></div></div>');
			}
			$('#changelog').show();

			var latestRelease = getReleaseData()[0];
			for (var i = 0; i < platforms.length; i++) {
				var assetUniversal = getDownload(platforms[i], latestRelease.tag_name, 'Universal');
				var asset32 = getDownload(platforms[i],latestRelease.tag_name, 32);
				var asset64 = getDownload(platforms[i],latestRelease.tag_name, 64);
				if(assetUniversal) {
					$('#' + platforms[i] + '-downloads').append('<a class="dl btn btn-default" href="' + assetUniversal.browser_download_url + '"><i class="fa fa-cloud-download" ></i> Version ' + latestRelease.tag_name + ' 32/64bit</a><br><br>');
				} else {
					if (asset32) {
						$('#' + platforms[i] + '-downloads').append('<a class="dl btn btn-default" href="' + asset32.browser_download_url + '"><i class="fa fa-cloud-download" ></i> Version ' + latestRelease.tag_name + ' 32bit</a><br><br>');
					}
					if (asset64) {
						$('#' + platforms[i] + '-downloads').append('<a class="dl btn btn-default" href="' + asset64.browser_download_url + '"><i class="fa fa-cloud-download"></i> Version ' + latestRelease.tag_name + ' 64bit</a>');
					}
				}
			}
			for (var i = 0; i < platforms.length; i++) {
				if ($('#' + platforms[i] + '-downloads').children().length == 0) {
					$('#' + platforms[i] + '-downloads').append('<button class="dl btn btn-danger" disabled>No Download Found</button><br><br>');
				}
			}
		}
	</script>
	<style>
		@media (min-width: 992px) {
			.releasenote-title {
				text-align: right;
			}
		}
		@media (max-width: 991px) {
			.releasenote-title {
				text-align: center;
			}
		}
	</style>
</head>
<body>
	<div class="container">
		<div class="row">
			<div class="col-md-12" style="padding:0xp;">
				<div class="jumbotron" style="text-align:center;" id="downloads">
					<div class="row">
						<div class="col-md-4" id="OSX-downloads-toplevel">
							<span class="hidden-xs hidden-sm">
								<i class="fa fa-apple fa-5x"></i>
								<br><br><span style="font-size:16pt">Mac OS X</span><br><br>
							</span>
							<span class="hidden-md hidden-lg">
								<i class="fa fa-apple fa-2x"></i>
								<span style="font-size:16pt">&nbsp;Mac OS X<br></span>
							</span>
							<span id="OSX-downloads">

							</span>
						</div>
						<div class="col-md-4" id="Win-downloads-toplevel">
							<span class="hidden-xs hidden-sm">
								<i class="fa fa-windows fa-5x"></i>
								<br><br><span style="font-size:16pt">Windows</span><br><br>
							</span>
							<span class="hidden-md hidden-lg">
								<br><br>
								<i class="fa fa-windows fa-2x"></i>
								<span style="font-size:16pt">&nbsp;Windows<br></span>
							</span>
							<span id="Win-downloads">

							</span>
						</div>
						<div class="col-md-4" id="Lin-downloads-toplevel">
							<span class="hidden-xs hidden-sm">
								<i class="fa fa-linux fa-5x"></i>
								<br><br><span style="font-size:16pt">Linux <span class="label label-warning">Beta</span></span><br><br>
							</span>
							<span class="hidden-md hidden-lg">
								<br><br>
								<i class="fa fa-linux fa-2x"></i>
								<span style="font-size:16pt">&nbsp;Linux <span class="label label-warning">Beta</span><br></span>
							</span>
							<span id="Lin-downloads">

							</span>
						</div>
					</div>
					<div class="row hidden-xs hidden-sm override-platform-specific-downloads-container" style="position:absolute;bottom:30px;right:70px;display:none;">
						<div class="col-md-12">
							<i class="fa fa-star"></i> Click <a href="#" class="override-platform-specific-downloads">here</a> to view other platforms
						</div>
					</div>
					<div class="row hidden-xs hidden-sm" style="position:absolute;bottom:50px;">
						<div class="col-md-12">
							<i class="fa fa-linux"></i> Linux users can also <a href="http://github.com/Khroki/MCEdit-Unified/releases">run from source.</a>
						</div>
					</div>
					<div class="row hidden-xs hidden-sm" style="position:absolute;bottom:30px;">
						<div class="col-md-12">
							<i class="fa fa-history"></i> Pre-Anvil versions can be found at <a href="https://github.com/Khroki/mcedit-old/releases?after=0.1.6build315">this page.</a>
						</div>
					</div>
					<div class="row hidden-md hidden-lg">
						<br><br>
					</div>
					<div class="row hidden-md hidden-lg override-platform-specific-downloads-container" style="position:absolute;bottom:40px;display:none;">
						<div class="col-md-12">
							<i class="fa fa-star"></i> Click <a href="#" class="override-platform-specific-downloads">here</a> to view other platforms
						</div>
					</div>
					<div class="row hidden-md hidden-lg" style="position:absolute;bottom:20px;">
						<div class="col-md-12">
							<i class="fa fa-linux"></i> Linux users can also <a href="http://github.com/Khroki/MCEdit-Unified/releases">run from source.</a>
						</div>
					</div>
					<div class="row hidden-md hidden-lg" style="position:absolute;bottom:0px;">
						<div class="col-md-12">
							<i class="fa fa-history"></i> Pre-Anvil versions can be found at <a href="https://github.com/Khroki/mcedit-old/releases?after=0.1.6build315">this page.</a>
						</div>
					</div>
				</div>
			</div>
			<div id="changelog" style="display:none;">
			</div>
		</div>
	</div>

	<hr class="hr">
	<div class="footer">
		&copy; 2010-2014 David Rio Vierra (<a href="https://twitter.com/codewarrior0">Codewarrior0</a>).
		&copy; 2014-2015 <a href="http://khroki.github.io/MCEdit-Unified/contributors.html">Khroki and all of the contributers</a>.
		All Rights Reserved to their respective ownership.
	</div>

</body>
</html>
